---
title: "Lab Meeting (12-01-2017)"
author: "Ming Chen"
date: "12/01/2017"
output: slidy_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


## Overview

- Singularity container
- Tripal Galaxy and Galaxy workflows
- Updates on R Markdown Galaxy tools
- Galaxy tool generator platform

## Singularity Container

### What can container technologies do for you?

>- You can put an OS into a container and install all kinds of tools and apps into the system.
>- You can transfer the container to a different computer and use the tools and apps within the container.
>- From the view of biologists, container technologies allow you to have all kinds flavors of virtual computers and stably move these computers around.

## Singularity Container

### Building containers

- Can be built from receipe files
- Can be easily done by pulling existing containers from container repositories
- Can pull containers from Docker container repository

```{r, out.width = "400px", fig.align='center'}
knitr::include_graphics("images/singularity-build-container.png")
```

## Singularity Container

### What is cool about Singularity container?

>- You don't need privileged permission to run singularity container. HPC cluster users usually don't have privileged permission.
>- You can build containers locally and install tools as root user. Then you can run the containers on the HPC cluster and use tools that you usually don't have permission to install.

## Singularity Container

### Demo

Pull a container with R installed on my local computer.

```{bash eval=FALSE, echo=TRUE}
singularity build --writable r.img docker://r-base
```

Install a testing package as root user.

```{bash eval=FALSE, echo=TRUE}
# run container interactively
singularity shell --writable r.img

# open R and install a testing package
R
install.package('plyr')
```

Transfer the container to a HPC cluster

```{bash eval=FALSE, echo=TRUE}
scp r.img  mchen33@149.165.156.175:/home/mchen33/r.img
```

Run the container on the HPC cluster as **non-root** user.

```{bash eval=FALSE, echo=TRUE}
singularity shell r.img

# check the testing package
R
require('plyr')
```

